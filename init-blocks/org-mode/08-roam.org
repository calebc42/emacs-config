#+PROPERTY: header-args :tangle ~/.emacs.d/elisp/org/08-roam.el

* Org-Roam
#+begin_src emacs-lisp
(use-package org-roam
  :init
  ;; Ensure sqlite3 is available for Org-Roam
  (when (executable-find "sqlite3")
    (setq emacsql-sqlite-executable (executable-find "sqlite3")))
  :hook (after-init . org-roam-db-autosync-mode)
  :bind (("C-c n l" . org-roam-buffer-toggle)
         ("C-c n f" . org-roam-node-find)
         ("C-c n i" . org-roam-node-insert)
         ("C-c n c" . org-roam-capture))
  :config
    (setq org-roam-directory           (expand-file-name "~/coppermind/")
          org-roam-db-location         (expand-file-name "org-roam.db" org-roam-directory)
          org-roam-node-display-template
          (concat "${title:*} " (propertize "${tags:10}" 'face 'org-tag)))

    (setq org-roam-file-exclude-regexp
      '("/assets/"
        "/data/"))

    (setq org-roam-capture-templates
      '(("d" "default" plain "%?"
         :target (file+head "${slug}.org"
                           "#+title: ${title}\n#+date: %U\n\n")
         :unnarrowed t)))

  (use-package org-roam-ui
    :after org-roam
    :bind ("C-c n u" . org-roam-ui-mode))
)
#+end_src
